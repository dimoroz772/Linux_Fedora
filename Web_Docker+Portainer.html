<head>
  <title>Docker + Portainer</title>
  <link rel="shortcut icon" href="./Fedora_Logo.png" type="image/png">
</head>
 <head>
  <meta charset="utf-8">
 </head>
<style>
.neonText1 {
  color: #87CEFA;
  text-shadow:
      0 0 1px #4169E1,
      0 0 1px #4169E1,
      0 0 1px #4169E1,
      0 0 1px #4169E1,
      0 0 1px #4169E1,
      0 0 1px #4169E1,
      0 0 1px #4169E1,
      0 0 1px #4169E1;
}
.neonText2 {
  color: #00FF00;
  text-shadow:
      0 0 1px #006400,
      0 0 1px #006400,
      0 0 1px #006400,
      0 0 1px #006400,
      0 0 1px #006400,
      0 0 1px #006400,
      0 0 1px #006400,
      0 0 1px #006400;
}
/* Additional styling */
body{
    background-color: black;
    background-repeat: no-repeat;
    background-size: cover;
    background-attachment: fixed;
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
    color: #cfcfcf;
}
a {
    text-decoration: none;
}
p {
  text-indent: 1.5em;
  font-family: monospace;
  font-weight: 500;
  white-space: pre;
  line-height: 2;
  letter-spacing: 1px;
}
</style>
<div class="container">
<p class="neonText1">
Установка/настройка работы связки Docker_Engine+Portainer на ОС Linux Fedora 39 (Server Edition)
--------------------------------------------------------------------------------------------------------------------------------------------------------------
Все описанные ниже действия выполнялись под пользователем root
--------------------------------------------------------------------------------------------------------------------------------------------------------------
Всем привет! Для реализации данного проекта мне потребовалось:
1) Установить ОС Linux Fedora 39 (Server Edition) и обновить все пакеты;
2) Настроить статическую IP-адресацию;
3) Установить Docker + прочие пакеты;
4) Теория и основные команды Docker-@;
5) Установить Portainer.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
Предисловие:
------------
NMTUI - это инструмент командной строки, который используется для настройки сети в системах Gnu / Linux. При запуске он вызывает графический текстовый
интерфейс, который помогает пользователям легко и эффективно настраивать сетевые интерфейсы.
------------
Docker — программное обеспечение для автоматизации развёртывания и управления приложениями в средах с поддержкой контейнеризации, контейнеризатор приложений.
------------
Portainer — это простой и удобный веб-интерфейс для управления Docker-контейнерами. С помощью Portainer вы сможете в несколько кликов запустить на вашем
сервере готовые контейнеры с популярным ПО и связать их между собой.
------------
Docker Compose — это инструментальное средство, входящее в состав Docker. Оно предназначено для решения задач, связанных с развёртыванием проектов.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
1) Обновление системы.
------------
<a class="neonText2">yum update -y && yum upgrade -y</a> |#|#| Поиск и обновление пакетов системы
--------------------------------------------------------------------------------------------------------------------------------------------------------------
2) Настройка статической IP-адресации.
------------
<a class="neonText2">yum install -y NetworkManager-tui</a> |#|#| Установка пакета nmtui для настройки сети на АРМ/VM.
------------
Гайд по тому, как пользоваться инструментом nmtui, вы можете посмотреть в интернете.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
3) Установка пакетов Docker + прочие пакеты.
------------
<a class="neonText2">yum install -y yum-utils</a> |#|#| Команда для установки пакета "yum-utils"
------------
<a class="neonText2">yum remove -y docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-selinux
docker-engine-selinux docker-engine</a> |#|#| Команда для удаление пакетов Docker(если он был установлен ранее)
------------
<a class="neonText2">yum config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo</a> |#|#| Команда для установки Docker-репозитория
------------
<a class="neonText2">yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-compose</a> |#|#| Команда для установки пакетов Docker
------------
<a class="neonText2">systemctl enable docker</a> |#|#| Команда для добавления службы "docker" в автозагрузку
------------
<a class="neonText2">systemctl start docker</a> |#|#| Команда для запуска службы "docker"
--------------------------------------------------------------------------------------------------------------------------------------------------------------
4) Теория и основные команды docker.
------------
Запуск контейнера из образа осуществляется командой "docker run" с указанием разнообразных ключей и нужного образа.
------------
Вот некоторые полезные ключи команды docker run:

-t — предоставляет доступ к терминалу внутри контейнера;
-i — делает возможным взаимодействие с терминалом внутри контейнера;
-d — запускает контейнер в фоновом режиме. Это позволяет использовать терминал, из которого запущен контейнер, для выполнения других команд во время работы контейнера;
--rm — автоматическое удаление контейнера после завершения его работы.
------------
<a class="neonText2">docker version</a> |#|#| Команда для проверки версии docker
------------
<a class="neonText2">docker run -dit --restart always httpd</a> |#|#| Команда запуска контейнера с политикой перезагрузки всегда, когда контейнер остановится.
------------
Также, кроме флага "always", есть ещё несколько, которые можно указать в аргументе с "--restart":

no - Это значение по умолчанию, это означает, что контейнеры не будут перезапущены;
on-failure - Это перезапустит контейнет в случае возникновения ошибки и сбоя контейнера;
always - Всегда перезапускайте контейнер, если он останавливается;
unless-stopped - Контейнер всегда будет перезапускаться, если он не был остановлен вручную.
------------
<a class="neonText2">docker run hello-world</a> |#|#| Запуск контейнера "hello-world"
------------
<a class="neonText2">docker ps -a</a> |#|#| Очень подробная информация об установленных/настроенных контейнерах
------------
<a class="neonText2">docker image ls</a> |#|#| Команда для просмотра установленных контейнеров
------------
<a class="neonText2">docker info</a> |#|#| Общая информация о docker-e
------------
<a class="neonText2">docker start "имя/id контейнера"</a> |#|#| Команда запуска контейнера
------------
<a class="neonText2">docker stop "имя/id контейнера"</a> |#|#| Команда для отсановки контейнера
------------
<a class="neonText2">docker restart "имя/id контейнера"</a> |#|#| Команда для перезапуска контейнера
------------
<a class="neonText2">docker rm "имя/id контейнера"</a> |#|#| Команда для удаления контейнера
------------
<a class="neonText2">docker update --restart on-failure "имя/id контейнера"</a> |#|#| Для контейнера "Portainer", настоятельно рекомендую прописать данную конмаду, т.к. после
перезагрузки VM, Portainer может не запуститься, так как при запуске может выдавать ошибки.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
5) Установка/настройка Portainer
------------
<a class="neonText2">docker volume create portainer_data</a> |#|#| Команда для создания тома для "Portainer"
------------
<a class="neonText2">docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer</a> |#|#| Команда для создания контейнера и
загрузки из репозитория образа "Portainer".
------------
ПОВТОРЮСЬ: <a class="neonText2">docker update --restart on-failure "имя/id контейнера"</a> |#|#| Для контейнера "Portainer", настоятельно рекомендую прописать данную конмаду, т.к.
после перезагрузки VM, Portainer может не запуститься, так как при запуске может выдавать ошибки.
------------
<a class="neonText2">ip a</a> |#|#| Команда для просмотра ip-адресов на сетевых интерфейсах
------------
После того, как вы узнали свой IP-address, то теперь вы можете открыть веб-браузер и посетить следующий сайт:
http://IP-address:9000 
Далее создаём пользователя, логинимся, выбираем локальную среду управления и наслаждаемся функционалом Portainer.
--------------------------------------------------------------------------------------------------------------------------------------------------------------
На этом инструкция закончена! Спасибо за внимание!)
</p>
</div>
